# –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –ø—Ä–æ–º—ñ—Å—ñ–≤

<br/>

### –ü–æ—è—Å–Ω–µ–Ω–Ω—è –∑–∞ –æ–¥–∏–Ω –∞–±–∑–∞—Ü

–ö–æ–ª–∏ –≤–∏–Ω–∏–∫–∞—î –ø–æ–º–∏–ª–∫–∞, –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, —á–∏ —Ü–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π —á–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –ø–æ—Ç—ñ–∫, –≤–∞–∂–ª–∏–≤–æ –º–∞—Ç–∏ –ø–æ–≤–Ω–∏–π —Å—Ç–µ–∫ –≤–∏–∫–ª–∏–∫—ñ–≤ –¥–ª—è –ø–æ—Ç–æ–∫—É –ø–æ–º–∏–ª–∫–∏. –î–∏–≤–Ω–æ, –∞–ª–µ —è–∫—â–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –ø–æ–≤–µ—Ä—Ç–∞—î –ø—Ä–æ–º—ñ—Å (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏–∫–ª–∏–∫–∞—î —ñ–Ω—à—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é) –±–µ–∑ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è, —Ç–æ —É —Ä–∞–∑—ñ –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ —Ñ—É–Ω–∫—Ü—ñ—è-–≤–∏–∫–ª–∏–∫–∞—á –Ω–µ –∑'—è–≤–∏—Ç—å—Å—è —É —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤. –¶–µ –∑–∞–ª–∏—à–∏—Ç—å –ª—é–¥–∏–Ω—É, —è–∫–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç—É—î –ø–æ–º–∏–ª–∫—É, –∑ –Ω–µ–ø–æ–≤–Ω–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é - —Ç–∏–º –±—ñ–ª—å—à–µ, —è–∫—â–æ –ø—Ä–∏—á–∏–Ω–∞ –ø–æ–º–∏–ª–∫–∏ –ª–µ–∂–∏—Ç—å —É –º–µ–∂–∞—Ö —Ü—ñ—î—ó —Ñ—É–Ω–∫—Ü—ñ—ó-–≤–∏–∫–ª–∏–∫–∞—á–∞. –Ü—Å–Ω—É—î —Ñ—É–Ω–∫—Ü—ñ—è v8 –ø—ñ–¥ –Ω–∞–∑–≤–æ—é "zero-cost async stacktraces", —è–∫–∞ –¥–æ–∑–≤–æ–ª—è—î —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤ –Ω–µ –æ–±—Ä–∏–≤–∞—Ç–∏—Å—è –Ω–∞ –æ—Å—Ç–∞–Ω–Ω—å–æ–º—É `await`. –ê–ª–µ —á–µ—Ä–µ–∑ –Ω–µ—Ç—Ä–∏–≤—ñ–∞–ª—å–Ω—ñ –¥–µ—Ç–∞–ª—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó, –≤–æ–Ω–∞ –Ω–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ, —è–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è, —â–æ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è —Ñ—É–Ω–∫—Ü—ñ—î—é (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—é —á–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—é), —î –ø—Ä–æ–º—ñ—Å–æ–º. –û—Ç–∂–µ, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –ø—Ä–æ–≥–∞–ª–∏–Ω —É —Å—Ç–µ–∫–∞—Ö –≤–∏–∫–ª–∏–∫—ñ–≤, –∫–æ–ª–∏ –ø–æ–≤–µ—Ä–Ω—É—Ç—ñ –ø—Ä–æ–º—ñ—Å–∏ –±—É–¥—É—Ç—å –≤—ñ–¥—Ö–∏–ª–µ–Ω—ñ, –º–∏ –∑–∞–≤–∂–¥–∏ –ø–æ–≤–∏–Ω–Ω—ñ —è–≤–Ω–æ –≤–∏—Ä—ñ—à—É–≤–∞—Ç–∏ –ø—Ä–æ–º—ñ—Å–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `await` –ø–µ—Ä–µ–¥ —ó—Ö –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è–º –∑ —Ñ—É–Ω–∫—Ü—ñ–π.

<br/>

### –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É –ê–Ω—Ç–∏-–®–∞–±–ª–æ–Ω: –í–∏–∫–ª–∏–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó –±–µ–∑ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è

<details><summary>Javascript</summary>
<p>

```javascript
async function throwAsync(msg) {
  await null // –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ—á—ñ–∫—É–≤–∞—Ç–∏ —Ö–æ—á–∞ –± —â–æ—Å—å, —â–æ–± –±—É—Ç–∏ –¥—ñ–π—Å–Ω–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–º (–¥–∏–≤. –ø—Ä–∏–º—ñ—Ç–∫—É #2)
  throw Error(msg)
}

async function returnWithoutAwait () {
  return throwAsync('–≤—ñ–¥—Å—É—Ç–Ω—ñ–π returnWithoutAwait —É —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤')
}

// üëé –ù–ï –º–∞—Ç–∏–º–µ returnWithoutAwait —É —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤
returnWithoutAwait().catch(console.log)
```

–≤–∏–≤–µ–¥–µ

```
Error: –≤—ñ–¥—Å—É—Ç–Ω—ñ–π returnWithoutAwait —É —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤
    at throwAsync ([...])
```
</p>
</details>

### –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É: –í–∏–∫–ª–∏–∫ —Ç–∞ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –Ω–∞–ª–µ–∂–Ω–∏–º —á–∏–Ω–æ–º

<details><summary>Javascript</summary>
<p>

```javascript
async function throwAsync(msg) {
  await null // –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ—á—ñ–∫—É–≤–∞—Ç–∏ —Ö–æ—á–∞ –± —â–æ—Å—å, —â–æ–± –±—É—Ç–∏ –¥—ñ–π—Å–Ω–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–º (–¥–∏–≤. –ø—Ä–∏–º—ñ—Ç–∫—É #2)
  throw Error(msg)
}

async function returnWithAwait() {
  return await throwAsync('–∑ —É—Å—ñ–º–∞ –ø—Ä–∏—Å—É—Ç–Ω—ñ–º–∏ –∫–∞–¥—Ä–∞–º–∏')
}

// üëç –º–∞—Ç–∏–º–µ returnWithAwait —É —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤
returnWithAwait().catch(console.log)
```

–≤–∏–≤–µ–¥–µ

```
Error: –∑ —É—Å—ñ–º–∞ –ø—Ä–∏—Å—É—Ç–Ω—ñ–º–∏ –∫–∞–¥—Ä–∞–º–∏
    at throwAsync ([...])
    at async returnWithAwait ([...])
```

</p>
</details>

<br/>

### –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É –ê–Ω—Ç–∏-–®–∞–±–ª–æ–Ω: –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –ø—Ä–æ–º—ñ—Å—É –±–µ–∑ –ø–æ–∑–Ω–∞—á–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó —è–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—ó

<details><summary>Javascript</summary>
<p>

```javascript
async function throwAsync () {
  await null // –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ—á—ñ–∫—É–≤–∞—Ç–∏ —Ö–æ—á–∞ –± —â–æ—Å—å, —â–æ–± –±—É—Ç–∏ –¥—ñ–π—Å–Ω–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–º (–¥–∏–≤. –ø—Ä–∏–º—ñ—Ç–∫—É #2)
  throw Error('–≤—ñ–¥—Å—É—Ç–Ω—ñ–π syncFn —É —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤')
}

function syncFn () {
  return throwAsync()
}

async function asyncFn () {
  return await syncFn()
}

// üëé syncFn –±—É–¥–µ –≤—ñ–¥—Å—É—Ç–Ω—è —É —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∞ –ø–æ–≤–µ—Ä—Ç–∞—î –ø—Ä–æ–º—ñ—Å, –±—É–¥—É—á–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—é
asyncFn().catch(console.log)
```

–≤–∏–≤–µ–¥–µ

```
Error: –≤—ñ–¥—Å—É—Ç–Ω—ñ–π syncFn —É —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤
    at throwAsync ([...])
    at async asyncFn ([...])
```

</p>
</details>

### –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É: –ü–æ–∑–Ω–∞—á–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó, —â–æ –ø–æ–≤–µ—Ä—Ç–∞—î –ø—Ä–æ–º—ñ—Å, —è–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—ó

<details><summary>Javascript</summary>
<p>

```javascript
async function throwAsync () {
  await null // –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ—á—ñ–∫—É–≤–∞—Ç–∏ —Ö–æ—á–∞ –± —â–æ—Å—å, —â–æ–± –±—É—Ç–∏ –¥—ñ–π—Å–Ω–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–º (–¥–∏–≤. –ø—Ä–∏–º—ñ—Ç–∫—É #2)
  throw Error('–∑ —É—Å—ñ–º–∞ –ø—Ä–∏—Å—É—Ç–Ω—ñ–º–∏ –∫–∞–¥—Ä–∞–º–∏')
}

async function changedFromSyncToAsyncFn () {
  return await throwAsync()
}

async function asyncFn () {
  return await changedFromSyncToAsyncFn()
}

// üëç —Ç–µ–ø–µ—Ä changedFromSyncToAsyncFn –±—É–¥–µ –ø—Ä–∏—Å—É—Ç–Ω—è —É —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤
asyncFn().catch(console.log)
```

–≤–∏–≤–µ–¥–µ

```
Error: –∑ —É—Å—ñ–º–∞ –ø—Ä–∏—Å—É—Ç–Ω—ñ–º–∏ –∫–∞–¥—Ä–∞–º–∏
    at throwAsync ([...])
    at changedFromSyncToAsyncFn ([...])
    at async asyncFn ([...])
```

</p>
</details>

<br/>

### –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É –ê–Ω—Ç–∏-—à–∞–±–ª–æ–Ω #3: –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É —Ç–∞–º, –¥–µ –æ—á—ñ–∫—É—î—Ç—å—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π

<details><summary>Javascript</summary>
<p>

```javascript
async function getUser (id) {
  await null
  if (!id) throw Error('—É —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤ –≤—ñ–¥—Å—É—Ç–Ω—î –º—ñ—Å—Ü–µ, –¥–µ –±—É–ª–æ –≤–∏–∫–ª–∏–∫–∞–Ω–æ getUser')
  return {id}
}

const userIds = [1, 2, 0, 3]

// üëé —Å—Ç–µ–∫ –≤–∏–∫–ª–∏–∫—ñ–≤ –≤–∫–ª—é—á–∞—Ç–∏–º–µ —Ñ—É–Ω–∫—Ü—ñ—é getUser, –∞–ª–µ –Ω–µ –¥–∞—Å—Ç—å –∂–æ–¥–Ω–æ—ó –ø—ñ–¥–∫–∞–∑–∫–∏, –¥–µ —ó—ó –±—É–ª–æ –≤–∏–∫–ª–∏–∫–∞–Ω–æ
Promise.all(userIds.map(getUser)).catch(console.log)
```

–≤–∏–≤–µ–¥–µ

```
Error: —É —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤ –≤—ñ–¥—Å—É—Ç–Ω—î –º—ñ—Å—Ü–µ, –¥–µ –±—É–ª–æ –≤–∏–∫–ª–∏–∫–∞–Ω–æ getUser
    at getUser ([...])
    at async Promise.all (index 2)
```

*–ü—Ä–∏–º—ñ—Ç–∫–∞*: –º–æ–∂–µ –∑–¥–∞—Ç–∏—Å—è, —â–æ `Promise.all (index 2)` –º–æ–∂–µ –¥–æ–ø–æ–º–æ–≥—Ç–∏ –∑—Ä–æ–∑—É–º—ñ—Ç–∏, –¥–µ –±—É–ª–æ –≤–∏–∫–ª–∏–∫–∞–Ω–æ `getUser`,
–∞–ª–µ —á–µ—Ä–µ–∑ [–∑–æ–≤—Å—ñ–º —ñ–Ω—à—É –ø–æ–º–∏–ª–∫—É –≤ v8](https://bugs.chromium.org/p/v8/issues/detail?id=9023), `(index 2)` —î
—Ä—è–¥–∫–æ–º –∑ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ—Ö –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤ v8

</p>
</details>

### –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É: –æ–±–≥–æ—Ä—Ç–∞–Ω–Ω—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É —É —Ñ—ñ–∫—Ç–∏–≤–Ω—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ—é —ó—ó —è–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É

<details><summary>Javascript</summary>
<p>

*–ü—Ä–∏–º—ñ—Ç–∫–∞ 1*: —è–∫—â–æ –≤–∏ –∫–æ–Ω—Ç—Ä–æ–ª—é—î—Ç–µ –∫–æ–¥ —Ñ—É–Ω–∫—Ü—ñ—ó, —è–∫–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏–º–µ –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –≤–∏–∫–ª–∏–∫ - –ø—Ä–æ—Å—Ç–æ –∑–º—ñ–Ω—ñ—Ç—å —Ü—é —Ñ—É–Ω–∫—Ü—ñ—é –Ω–∞
–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É —ñ –¥–æ–¥–∞–π—Ç–µ `await` –ø–µ—Ä–µ–¥ –≤–∏–∫–ª–∏–∫–æ–º –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É. –ù–∏–∂—á–µ —è –ø—Ä–∏–ø—É—Å–∫–∞—é, —â–æ –≤–∏ –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î—Ç–µ –∑–∞ –∫–æ–¥, —è–∫–∏–π –≤–∏–∫–ª–∏–∫–∞—î
–∑–≤–æ—Ä–æ—Ç–Ω–∏–π –≤–∏–∫–ª–∏–∫ (–∞–±–æ –π–æ–≥–æ –∑–º—ñ–Ω–∞ –Ω–µ–ø—Ä–∏–π–Ω—è—Ç–Ω–∞, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —á–µ—Ä–µ–∑ –∑–≤–æ—Ä–æ—Ç–Ω—é —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å)

*–ü—Ä–∏–º—ñ—Ç–∫–∞ 2*: –¥–æ—Å–∏—Ç—å —á–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∑–≤–æ—Ä–æ—Ç–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É –≤ –º—ñ—Å—Ü—è—Ö, –¥–µ –æ—á—ñ–∫—É—î—Ç—å—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π, –≤–∑–∞–≥–∞–ª—ñ –Ω–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ. –¶–µ –Ω–µ –ø—Ä–æ
—Ç–µ, —è–∫ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –∫–æ–¥, —è–∫–∏–π –Ω–µ –ø—Ä–∞—Ü—é—î - —Ü–µ –ø—Ä–æ —Ç–µ, —è–∫ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ —Å—Ç–µ–∫ –≤–∏–∫–ª–∏–∫—ñ–≤ —É –≤–∏–ø–∞–¥–∫—É, —è–∫—â–æ –∫–æ–¥ –≤–∂–µ –ø—Ä–∞—Ü—é—î —è–∫
–æ—á—ñ–∫—É–≤–∞–ª–æ—Å—è

```javascript
async function getUser (id) {
  await null
  if (!id) throw Error('–∑ —É—Å—ñ–º–∞ –ø—Ä–∏—Å—É—Ç–Ω—ñ–º–∏ –∫–∞–¥—Ä–∞–º–∏')
  return {id}
}

const userIds = [1, 2, 0, 3]

// üëç —Ç–µ–ø–µ—Ä —Ä—è–¥–æ–∫ –Ω–∏–∂—á–µ —î —É —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤
Promise.all(userIds.map(async id => await getUser(id))).catch(console.log)
```

–≤–∏–≤–µ–¥–µ

```
Error: –∑ —É—Å—ñ–º–∞ –ø—Ä–∏—Å—É—Ç–Ω—ñ–º–∏ –∫–∞–¥—Ä–∞–º–∏
    at getUser ([...])
    at async ([...])
    at async Promise.all (index 2)
```

–¥–µ –∑–∞–≤–¥—è–∫–∏ —è–≤–Ω–æ–º—É `await` –≤ `map`, –∫—ñ–Ω–µ—Ü—å —Ä—è–¥–∫–∞ `at async ([...])` –≤–∫–∞–∑—É–≤–∞—Ç–∏–º–µ –Ω–∞ —Ç–æ—á–Ω–µ –º—ñ—Å—Ü–µ, –¥–µ
–±—É–ª–æ –≤–∏–∫–ª–∏–∫–∞–Ω–æ `getUser`

*–ü—Ä–∏–º—ñ—Ç–∫–∞*: —è–∫—â–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –æ–±–≥–æ—Ä—Ç–∞—î `getUser`, –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å `await` –ø–µ—Ä–µ–¥ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è–º (–∞–Ω—Ç–∏-—à–∞–±–ª–æ–Ω #1 + –∞–Ω—Ç–∏-—à–∞–±–ª–æ–Ω #3)
—Ç–æ–¥—ñ —É —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤ –∑–∞–ª–∏—à–∏—Ç—å—Å—è –ª–∏—à–µ –æ–¥–∏–Ω –∫–∞–¥—Ä:

```javascript
[...]

// üëé –∞–Ω—Ç–∏-—à–∞–±–ª–æ–Ω 1 + –∞–Ω—Ç–∏-—à–∞–±–ª–æ–Ω 3 - —É —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤ –∑–∞–ª–∏—à–∏–≤—Å—è –ª–∏—à–µ –æ–¥–∏–Ω –∫–∞–¥—Ä
Promise.all(userIds.map(async id => getUser(id))).catch(console.log)
```

–≤–∏–≤–µ–¥–µ

```
Error: [...]
    at getUser ([...])
```

</p>
</details>

<br/>

## –†–æ–∑—à–∏—Ä–µ–Ω–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è

–ú–µ—Ö–∞–Ω—ñ–∑–º–∏ —Å—Ç–µ–∫—ñ–≤ –≤–∏–∫–ª–∏–∫—ñ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π —Ç–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π —É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó v8 –¥–æ—Å–∏—Ç—å —Ä—ñ–∑–Ω—ñ:
—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π —Å—Ç–µ–∫ –≤–∏–∫–ª–∏–∫—ñ–≤ –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ **—Å—Ç–µ–∫—É**, –Ω–∞–¥–∞–Ω–æ–º—É –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–æ—é —Å–∏—Å—Ç–µ–º–æ—é, –Ω–∞ —è–∫—ñ–π –ø—Ä–∞—Ü—é—î Node.js (—è–∫ —É –±—ñ–ª—å—à–æ—Å—Ç—ñ –º–æ–≤ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è).
–ö–æ–ª–∏ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è, **—Å—Ç–µ–∫** –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏ –≤–∏—à—Ç–æ–≤—Ö—É—î —ó—ó, —è–∫ —Ç—ñ–ª—å–∫–∏
—Ñ—É–Ω–∫—Ü—ñ—è –¥–æ—Ö–æ–¥–∏—Ç—å –¥–æ —Å–≤–æ–≥–æ –ø–µ—Ä—à–æ–≥–æ `await`. –¢–æ–º—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π —Å—Ç–µ–∫ –≤–∏–∫–ª–∏–∫—ñ–≤ —î —Å—É–º—ñ—à—à—é **—Å—Ç–µ–∫—É** –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏ —Ç–∞ –≤—ñ–¥—Ö–∏–ª–µ–Ω–æ–≥–æ
**–ª–∞–Ω—Ü—é–∂–∫–∞ –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–º—ñ—Å—ñ–≤**. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö —Å—Ç–µ–∫—ñ–≤ –≤–∏–∫–ª–∏–∫—ñ–≤ –∑ –Ω—É–ª—å–æ–≤–æ—é –≤–∞—Ä—Ç—ñ—Å—Ç—é —Ä–æ–∑—à–∏—Ä—é—î **–ª–∞–Ω—Ü—é–∂–æ–∫ –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–º—ñ—Å—ñ–≤**
—Ç—ñ–ª—å–∫–∏ —Ç–æ–¥—ñ, –∫–æ–ª–∏ –ø—Ä–æ–º—ñ—Å –æ—á—ñ–∫—É—î—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `await` <span>[¬π](#1)</span>. –û—Å–∫—ñ–ª—å–∫–∏ —Ç—ñ–ª—å–∫–∏ `async` —Ñ—É–Ω–∫—Ü—ñ—ó –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `await`,
—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –∑–∞–≤–∂–¥–∏ –±—É–¥–µ –≤—ñ–¥—Å—É—Ç–Ω—è –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º—É —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤, —è–∫—â–æ –±—É–¥—å-—è–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è –±—É–ª–∞ –≤–∏–∫–æ–Ω–∞–Ω–∞ –ø—ñ—Å–ª—è —Ç–æ–≥–æ,
—è–∫ —Ñ—É–Ω–∫—Ü—ñ—è –±—É–ª–∞ –≤–∏–∫–ª–∏–∫–∞–Ω–∞ <span>[¬≤](#2)</span>

### –ö–æ–º–ø—Ä–æ–º—ñ—Å

–ö–æ–∂–µ–Ω `await` —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤—É –º—ñ–∫—Ä–æ–∑–∞–¥–∞—á—É –≤ —Ü–∏–∫–ª—ñ –ø–æ–¥—ñ–π, —Ç–æ–º—É –¥–æ–¥–∞–≤–∞–Ω–Ω—è –±—ñ–ª—å—à–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ `await` –¥–æ –∫–æ–¥—É
–ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ –¥–µ—è–∫–æ–≥–æ –∑–Ω–∏–∂–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ. –¢–∏–º –Ω–µ –º–µ–Ω—à, –∑–Ω–∏–∂–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ, —Å–ø—Ä–∏—á–∏–Ω–µ–Ω–µ –º–µ—Ä–µ–∂–µ—é –∞–±–æ
–±–∞–∑–æ—é –¥–∞–Ω–∏—Ö, —î [–Ω–∞–¥–∑–≤–∏—á–∞–π–Ω–æ –±—ñ–ª—å—à–∏–º](https://colin-scott.github.io/personal_website/research/interactive_latency.html),
—Ç–æ–º—É –¥–æ–¥–∞—Ç–∫–æ–≤–∞ –∑–∞—Ç—Ä–∏–º–∫–∞ –≤—ñ–¥ `await` –Ω–µ —î —á–∏–º–æ—Å—å, —â–æ —Å–ª—ñ–¥ –≤—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ –ø—ñ–¥ —á–∞—Å —Ä–æ–∑—Ä–æ–±–∫–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—ñ–≤ –∞–±–æ CLI,
—è–∫—â–æ —Ç—ñ–ª—å–∫–∏ —Ü–µ –Ω–µ –¥—É–∂–µ –≥–∞—Ä—è—á–∏–π –∫–æ–¥ –¥–ª—è –∑–∞–ø–∏—Ç—É –∞–±–æ –∫–æ–º–∞–Ω–¥–∏. –¢–æ–º—É –≤–∏–¥–∞–ª–µ–Ω–Ω—è `await` —É
`return await` –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ –æ–¥–Ω–∏–º –∑ –æ—Å—Ç–∞–Ω–Ω—ñ—Ö –º—ñ—Å—Ü—å –¥–ª—è –ø–æ—à—É–∫—É –ø–æ–º—ñ—Ç–Ω–æ–≥–æ –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —ñ
—Ç–æ—á–Ω–æ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –ø–æ–≤–∏–Ω–Ω–æ —Ä–æ–±–∏—Ç–∏—Å—è –∑–∞–∑–¥–∞–ª–µ–≥—ñ–¥—å.


### –ß–æ–º—É return await –≤–≤–∞–∂–∞–≤—Å—è –∞–Ω—Ç–∏-—à–∞–±–ª–æ–Ω–æ–º —É –º–∏–Ω—É–ª–æ–º—É

–Ü—Å–Ω—É—î —Ä—è–¥ [—á—É–¥–æ–≤–∏—Ö —Å—Ç–∞—Ç–µ–π](https://jakearchibald.com/2017/await-vs-return-vs-return-await/), —è–∫—ñ –ø–æ—è—Å–Ω—é—é—Ç—å,
—á–æ–º—É `return await` –Ω—ñ–∫–æ–ª–∏ –Ω–µ —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–æ–∑–∞ –±–ª–æ–∫–æ–º `try`, —ñ –Ω–∞–≤—ñ—Ç—å
[–ø—Ä–∞–≤–∏–ª–æ ESLint](https://eslint.org/docs/rules/no-return-await), —è–∫–µ –∑–∞–±–æ—Ä–æ–Ω—è—î –π–æ–≥–æ. –ü—Ä–∏—á–∏–Ω–∞ —Ü—å–æ–≥–æ –ø–æ–ª—è–≥–∞—î –≤ —Ç–æ–º—É, —â–æ
–∑ –º–æ–º–µ–Ω—Ç—É, –∫–æ–ª–∏ async/await —Å—Ç–∞–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∏–º–∏ –∑ —Ç—Ä–∞–Ω—Å–ø—ñ–ª—è—Ç–æ—Ä–∞–º–∏ –≤ Node.js 0.10 (—ñ –æ—Ç—Ä–∏–º–∞–ª–∏ –Ω–∞—Ç–∏–≤–Ω—É –ø—ñ–¥—Ç—Ä–∏–º–∫—É –≤ Node.js 7.6) —ñ –¥–æ
—Ç–æ–≥–æ, —è–∫ "–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ —Å—Ç–µ–∫–∏ –≤–∏–∫–ª–∏–∫—ñ–≤ –∑ –Ω—É–ª—å–æ–≤–æ—é –≤–∞—Ä—Ç—ñ—Å—Ç—é" –±—É–ª–∏ –≤–≤–µ–¥–µ–Ω—ñ –≤ Node.js 10 —ñ —Ä–æ–∑–±–ª–æ–∫–æ–≤–∞–Ω—ñ –≤ Node.js 12, `return await` –±—É–≤ –∞–±—Å–æ–ª—é—Ç–Ω–æ
–µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–Ω–∏–º `return` –¥–ª—è –±—É–¥—å-—è–∫–æ–≥–æ –∫–æ–¥—É –ø–æ–∑–∞ –±–ª–æ–∫–æ–º `try`. –¶–µ –º–æ–∂–µ –≤—Å–µ —â–µ –±—É—Ç–∏ —Ç–∞–∫ –¥–ª—è –¥–µ—è–∫–∏—Ö —ñ–Ω—à–∏—Ö ES-–¥–≤–∏–≥—É–Ω—ñ–≤. –û—Å—å —á–æ–º—É
–≤–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–º—ñ—Å—ñ–≤ –ø–µ—Ä–µ–¥ —ó—Ö –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è–º —î –Ω–∞–π–∫—Ä–∞—â–æ—é –ø—Ä–∞–∫—Ç–∏–∫–æ—é –¥–ª—è Node.js, –∞ –Ω–µ –¥–ª—è EcmaScript –≤ —Ü—ñ–ª–æ–º—É.

### –ü—Ä–∏–º—ñ—Ç–∫–∏:

1. –©–µ –æ–¥–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞, —á–æ–º—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π —Å—Ç–µ–∫ –≤–∏–∫–ª–∏–∫—ñ–≤ –º–∞—î —Ç–∞–∫—É —Ö–∏—Ç—Ä—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é, - —Ü–µ –æ–±–º–µ–∂–µ–Ω–Ω—è, —â–æ —Å—Ç–µ–∫ –≤–∏–∫–ª–∏–∫—ñ–≤
   –∑–∞–≤–∂–¥–∏ –ø–æ–≤–∏–Ω–µ–Ω –±—É–¥—É–≤–∞—Ç–∏—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –Ω–∞ —Ç–æ–º—É –∂ —Ç–∏–∫—É —Ü–∏–∫–ª—É –ø–æ–¥—ñ–π <span id="a1">[¬π](#1)</span>
2. –ë–µ–∑ `await` –≤ `throwAsync` –∫–æ–¥ –±—É–¥–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏—Å—è –≤ —Ç—ñ–π –∂–µ —Ñ–∞–∑—ñ —Ü–∏–∫–ª—É –ø–æ–¥—ñ–π. –¶–µ
   –≤–∏—Ä–æ–¥–∂–µ–Ω–∏–π –≤–∏–ø–∞–¥–æ–∫, –∫–æ–ª–∏ **—Å—Ç–µ–∫** –û–° –Ω–µ –±—É–¥–µ –ø–æ—Ä–æ–∂–Ω—ñ–º —ñ —Å—Ç–µ–∫ –≤–∏–∫–ª–∏–∫—ñ–≤ –±—É–¥–µ –ø–æ–≤–Ω–∏–º –Ω–∞–≤—ñ—Ç—å –±–µ–∑ —è–≤–Ω–æ–≥–æ
   –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É —Ñ—É–Ω–∫—Ü—ñ—ó. –ó–∞–∑–≤–∏—á–∞–π –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–æ–º—ñ—Å—ñ–≤ –≤–∫–ª—é—á–∞—î –¥–µ—è–∫—ñ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó, —ñ —Ç–æ–º—É —á–∞—Å—Ç–∏–Ω–∏
   —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤ –±—É–¥—É—Ç—å –≤—Ç—Ä–∞—á–µ–Ω—ñ
3. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ —Å—Ç–µ–∫–∏ –≤–∏–∫–ª–∏–∫—ñ–≤ –∑ –Ω—É–ª—å–æ–≤–æ—é –≤–∞—Ä—Ç—ñ—Å—Ç—é –≤—Å–µ —â–µ –Ω–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º—É—Ç—å –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—å –ø—Ä–æ–º—ñ—Å—ñ–≤, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ–ª–∏ –æ–¥–∏–Ω –ø—Ä–æ–º—ñ—Å
   –æ—á—ñ–∫—É—î—Ç—å—Å—è –±–∞–≥–∞—Ç–æ —Ä–∞–∑—ñ–≤ —É —Ä—ñ–∑–Ω–∏—Ö –º—ñ—Å—Ü—è—Ö

### –ü–æ—Å–∏–ª–∞–Ω–Ω—è:
<span id="1">1. </span>[–ë–ª–æ–≥-–ø–æ—Å—Ç –ø—Ä–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ —Å—Ç–µ–∫–∏ –≤–∏–∫–ª–∏–∫—ñ–≤ –∑ –Ω—É–ª—å–æ–≤–æ—é –≤–∞—Ä—Ç—ñ—Å—Ç—é –≤ v8](https://v8.dev/blog/fast-async)
<br/>

<span id="2">2. </span>[–î–æ–∫—É–º–µ–Ω—Ç –ø—Ä–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ —Å—Ç–µ–∫–∏ –≤–∏–∫–ª–∏–∫—ñ–≤ –∑ –Ω—É–ª—å–æ–≤–æ—é –≤–∞—Ä—Ç—ñ—Å—Ç—é —ñ–∑ –∑–≥–∞–¥–∞–Ω–∏–º–∏ —Ç—É—Ç –¥–µ—Ç–∞–ª—è–º–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó](
https://docs.google.com/document/d/13Sy_kBIJGP0XT34V1CV3nkWya4T
